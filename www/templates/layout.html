<ion-view title="{{currentInspection.address}}">
    <ion-nav-buttons side="left">
      <button class="button" ng-click="chooseFloor()">
        {{currentInspection.currentFloor.name}} at {{currPosition}}
      </button>
      <!-- <button class="button" ng-click="showAddRoomModal()">
		  Rooms
	  </button> -->
   </ion-nav-buttons>
      <!-- <button class="button" ng-click="gridmag=gridmag-0.1">
        <img id="magnifySmaller" ng-src="img/zoomout.svg" />
      </button>
      <button class="button" ng-click="gridmag=gridmag+0.1">
        <img id="magnifyLarger" ng-src="img/zoomin.svg" />
      </button> -->
   <ion-nav-buttons side="right">
	  <button ng-show="qsOpen" class="button" ng-click="toggleLeftSideMenu()">
		  Questions
	  </button>
      <button ng-show="!qsOpen" class="button" ng-click="toggleLeftSideMenu()">
		  Plan
	  </button>
    </ion-nav-buttons>
    
    <ion-side-menus>
    <ion-side-menu width="{{gridWd}}" id="grid" side="left" drag-content="false">
<div id="floor-wrap">
    <div id="grid-container">
<!--        If we have it zoom through the Viewbox? Need to test on devices? gridMag? I think it now depends on original size - could just have it come in multiples? -->
            <svg id="floor-container" style='stroke-width: 0px; '
             viewBox = "0 0 {{canvasSize}} {{canvasSize}}"
             grid-manip gridmag='gridmag'>
			 <!-- <text x='133' y='333' ng-show="gridShow5">gridshow{{gridshow5}}</text> -->
                
            <g ng-show="gridShow5" 
               stroke="#6bea3b" 
               stroke-dasharray="5,5,5,5,5,5" 
               fill="#fcfbfa" 
               fill-opacity="0.2" 
               stroke-width="1">

                <line ng-repeat="gridpt in gridLineNumber(windowWd,50)" ng-attr-x1="{{gridpt}}" y1="0" ng-attr-x2="{{gridpt}}" ng-attr-y2="{{2000}}" />
                <line ng-repeat="gridpt in gridLineNumber(windowHt,50)" x1="0" ng-attr-y1="{{gridpt}}" ng-attr-x2="{{canvasSize}}" ng-attr-y2="{{gridpt}}" />  

    
            </g>  

            <g 
               ng-show="gridShow1" stroke="#6bea3b" stroke-dasharray="2,2,2,2,2,2" fill="#fcfbfa" fill-opacity="0.2" stroke-width=".2">
                

                <line ng-repeat="gridpt in gridLineNumber(canvasSize,10)" ng-attr-x1="{{gridpt}}" y1="0" ng-attr-x2="{{gridpt}}" ng-attr-y2="{{canvasSize}}" />
                <line ng-repeat="gridpt in gridLineNumber(canvasSize,10)" x1="0" ng-attr-y1="{{gridpt}}" ng-attr-x2="{{canvasSize}}" ng-attr-y2="{{gridpt}}" />            

                
            </g> 
				

			<g id="wholeFloor">

            <g class="floorLines" id="{{room.timeId}}"
               ng-repeat="(idIter, room) in currentInspection.currentFloor.paths track by idIter"
               room = 'room' gridmag = 'gridmag'
               room-manip>
                
                      
                <path id="{{'roomPath'+room.properties.name}}"
					ng-attr-d="{{svgPath(room.svgPoints)}}" 
					stroke-dasharray="{{room.dashStroke}}"
					stroke="#2050ba" fill="#fcfbfa" 
					fill-opacity="0.01" stroke-width="2"/>
                
                <text
					font-size="8pt" 
					fill="black">
                    <textPath xlink:href="{{'#roomPath'+room.properties.name}}"
							dominant-baseline="hanging"
                              startOffset="2%">{{room.properties.name}}</textPath>
				</text>
<!--
                <g>
	<path fill="#16A770" ng-attr-stroke="black" stroke-width=3 stroke-miterlimit="10" d="M344.5,336.5c0,4.418-3.582,8-8,8h-28c-4.418,0-8-3.582-8-8v-28
		c0-4.418,3.582-8,8-8h28c4.418,0,8,3.582,8,8V36.5z"/>
-->	<g>

		<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="212.5" y1="205" x2="212.5" y2="240"/>
		<polygon fill="black" stroke="#000000" stroke-miterlimit="10" points="212.5,226.7 212.5,206.767 237.545,216.733 		"/>
	</g>
<!--</g>-->
				<g ng-repeat="rmobj in room.roomObjs"
					rmobjmanip
					rmobj = 'rmobj' class="{{rmobj[0].points}}"
					>
                    <path ng-attr-d="{{rmObjPath(rmobj[0].points)}}"
                          class="{{rmobj[0].points}}"
                          stroke="#2050ba" fill="#fcfbfa" 
                          x="200" y="200"
					fill-opacity="0.01" stroke-width="2"/>
                    <path d="M250,250 l0,8 l0,-3 l3,-2 l-3,-3"
                          stroke="#2050ba" fill="#fcfbfa" 
                          x="200" y="200"
                          ng-click="alert(rmobj[0].points)"
					fill-opacity="0.01" stroke-width="2"/>
				</g>
					<!--
                        ng-attr-x={{vals.points[0][0]+rmObj.points[0]}}
						ng-attr-y={{vals.points[0][1]+rmObj.points[1]}}>
so that they move together; have to calculate for weird cases? maybe just on real fingers, instead of closestPts? Will vals count through correctly??-->
					
                <g ng-repeat="lines in room.measurePoints" ng-show="(!room.editLines)">
                    <text font-size="6pt" fill="blue" >
                        <textPath xlink:href="{{'#'+$index+'textPath'+room.properties.name}}" 
                                  startOffset="45%">{{lines[4]/10}}'</textPath>
                    </text>
                    <path id="{{$index+'textPath'+room.properties.name}}" 
                          line-manip linepoints='lines' gridmag = 'gridmag'
                          stroke="white" stroke-opacity=".01" stroke-width="34"
                        ng-attr-d="M{{lines[0].points[0][0]}} {{lines[0].points[0][1]}}
                            L{{lines[1].points[0][0]}} {{lines[1].points[0][1]}}"
                    />
                </g>
                <g ng-show="(!room.editLines)"
                   ng-repeat="(i, vals) in room.svgPoints">
					
                    <circle stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[0]"
                        circcnt = "i" gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[0][0]}}
                        ng-attr-cy={{vals.points[0][1]}}
                        r = 16
                    />
					<!-- <text ng-attr-x={{vals.points[0][0]}}
                        ng-attr-y={{vals.points[0][1]}}>{{i}}</text>
					> -->
                    <circle ng-if=(vals.points[1])
                        fill="#ba202c" stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[1]"
						gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[1][0]}}
                        ng-attr-cy={{vals.points[1][1]}}
                        r = 16
                    />
                    <circle ng-if=(vals.points[2])
                        fill="#ba202c" stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[2]"
						gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[2][0]}}
                        ng-attr-cy={{vals.points[2][1]}}
                        r = 16
                    />
                    <line ng-if="vals.pathType=='CubicBezier'"
                          stroke="#ba202c" stroke-width=".5"
                          ng-attr-x1={{vals.points[1][0]}}
                          ng-attr-y1={{vals.points[1][1]}}
                          ng-attr-x2={{vals.points[2][0]}}
                          ng-attr-y2={{vals.points[2][1]}} />
                    <line ng-if="vals.pathType=='QuadBezier'"
						
                          stroke="#ba202c" stroke-width=".5"
                          ng-attr-x1={{vals.points[1][0]}}
                          ng-attr-y1={{vals.points[1][1]}}
                          ng-attr-x2={{vals.points[0][0]}}
                          ng-attr-y2={{vals.points[0][1]}} />
                    <line ng-if="vals.pathType=='QuadBezier' && i>1"
                          stroke="#ba202c" stroke-width=".5"
                          ng-attr-x1={{room.svgPoints[i-1].points[0][0]}}
                          ng-attr-y1={{room.svgPoints[i-1].points[0][1]}}
                          ng-attr-x2={{room.svgPoints[i].points[1][0]}}
                          ng-attr-y2={{room.svgPoints[i].points[1][1]}} />
                    <line ng-if="vals.pathType=='QuadBezier' && i==1"
                          stroke="#ba202c" stroke-width=".5"
                          ng-attr-x1={{room.svgPoints[0].points[0][0]}}
                          ng-attr-y1={{room.svgPoints[0].points[0][1]}}
                          ng-attr-x2={{room.svgPoints[i].points[1][0]}}
                          ng-attr-y2={{room.svgPoints[i].points[1][1]}} />
					
                </g>
            </g>

		</g>
        </svg>
        
    </div>
        
    </ion-side-menu>
        

    <ion-side-menu-content ng-click="toggleLeftSideMenu()">
        <ion-view name="questions"></ion-view>
    </ion-side-menu-content>
		 


</ion-side-menus>
</ion-view>