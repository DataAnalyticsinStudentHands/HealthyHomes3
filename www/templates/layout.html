<!--
<ion-view ng-click="chooseFloor()"
          title="{{currentInspection.address + ': <b>' + currentFloor.name.toUpperCase() + '</b> floor'}}"
          >
-->
<ion-view>
    <ion-nav-buttons>
      <button class="button" ng-click="chooseFloor()">
        {{currentInspection.address + ": "+currentInspection.currentFloor.name.toUpperCase()}}
      </button>
      <!-- <button class="button" ng-click="gridmag=gridmag-0.1">
        <img id="magnifySmaller" ng-src="img/zoomout.svg" />
      </button>
      <button class="button" ng-click="gridmag=gridmag+0.1">
        <img id="magnifyLarger" ng-src="img/zoomin.svg" />
      </button> -->
	  <button class="button" ng-click="showAddRoomModal()">
		  Add room to {{currentInspection.currentFloor.name.toUpperCase()}}
	  </button>
    </ion-nav-buttons>
    
    <ion-side-menus>
    <ion-side-menu width="{{gridWd}}" id="grid" side="left" drag-content="false">
<div id="floor-wrap">
    <div id="grid-container">
<!--        <ion-nav-view id="floor-wrap" name="floor"></ion-nav-view>-->
            <svg id="floor-container" style='stroke-width: 0px; '
             viewBox = "0 0 2000 2000"
             grid-manip gridmag='gridmag'>
			 <!-- <text x='133' y='333' ng-show="gridShow5">gridshow{{gridshow5}}</text> -->
                
            <g ng-show="gridShow5" 
               stroke="#6bea3b" 
               stroke-dasharray="5,5,5,5,5,5" 
               fill="#fcfbfa" 
               fill-opacity="0.2" 
               stroke-width="1">

                <line ng-repeat="gridpt in gridLineNumber(windowWd,50)" ng-attr-x1="{{gridpt}}" y1="0" ng-attr-x2="{{gridpt}}" ng-attr-y2="{{2000}}" />
                <line ng-repeat="gridpt in gridLineNumber(windowHt,50)" x1="0" ng-attr-y1="{{gridpt}}" ng-attr-x2="{{canvasSize}}" ng-attr-y2="{{gridpt}}" />  

    
            </g>  

            <g 
               ng-show="gridShow1" stroke="#6bea3b" stroke-dasharray="2,2,2,2,2,2" fill="#fcfbfa" fill-opacity="0.2" stroke-width=".2">
                

                <line ng-repeat="gridpt in gridLineNumber(canvasSize,10)" ng-attr-x1="{{gridpt}}" y1="0" ng-attr-x2="{{gridpt}}" ng-attr-y2="{{canvasSize}}" />
                <line ng-repeat="gridpt in gridLineNumber(canvasSize,10)" x1="0" ng-attr-y1="{{gridpt}}" ng-attr-x2="{{canvasSize}}" ng-attr-y2="{{gridpt}}" />            

                
            </g> 
				

			<g id="wholeFloor">

            <g class="floorLines"
               ng-repeat="(id, room) in currentInspection.currentFloor.paths track by id"
               room = 'room' gridmag = 'gridmag'
               room-manip >
                
                      
                <path id="{{'roomPath'+room.properties.name}}"
					ng-attr-d="{{svgPath(room.svgPoints)}}" 
					stroke-dasharray="{{room.dashStroke}}"
					stroke="#2050ba" fill="#fcfbfa" 
					fill-opacity="0.01" stroke-width="2"/>
                
                <text ng-click="showAddRoomModal()"
					font-size="8pt" 
					fill="black">
                    <textPath xlink:href="{{'#roomPath'+room.properties.name}}"
							dominant-baseline="hanging"
                              startOffset="2%">{{room.properties.name}}</textPath>
				</text>
                
                <g ng-repeat="lines in room.measurePoints" ng-show="(!room.editLines)">
                    <text font-size="6pt" fill="blue" >
                        <textPath xlink:href="{{'#'+$index+'textPath'+room.properties.name}}" 
                                  startOffset="45%">{{lines[4]/10}}'</textPath>
                    </text>
                    <path id="{{$index+'textPath'+room.properties.name}}" 
                          line-manip linepoints='lines' gridmag = 'gridmag'
                          stroke="white" stroke-opacity=".01" stroke-width="34"
                        ng-attr-d="M{{lines[0].points[0][0]}} {{lines[0].points[0][1]}}
                            L{{lines[1].points[0][0]}} {{lines[1].points[0][1]}}"
                    />
                </g>
                <g ng-show="(!room.editLines)"
                   ng-repeat="(i, vals) in room.svgPoints">
					
                    <circle stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[0]"
                        circcnt = "i" gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[0][0]}}
                        ng-attr-cy={{vals.points[0][1]}}
                        r = 16
                    />
					<!-- <text ng-attr-x={{vals.points[0][0]}}
                        ng-attr-y={{vals.points[0][1]}}>{{i}}</text>
					> -->
                    <circle ng-if=(vals.points[1])
                        fill="#ba202c" stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[1]"
						gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[1][0]}}
                        ng-attr-cy={{vals.points[1][1]}}
                        r = 16
                    />
                    <circle ng-if=(vals.points[2])
                        fill="#ba202c" stroke="#fcf8f8" stroke-width="16" 
                        opacity=".2"
                        circle-manip circpoints="vals.points[2]"
						gridmag = 'gridmag'
                        ng-attr-cx={{vals.points[2][0]}}
                        ng-attr-cy={{vals.points[2][1]}}
                        r = 16
                    />
                    <line ng-if=(vals.points[2])
                          stroke="#ba202c" stroke-width=".5"
                          ng-attr-x1={{vals.points[1][0]}}
                          ng-attr-y1={{vals.points[1][1]}}
                          ng-attr-x2={{vals.points[2][0]}}
                          ng-attr-y2={{vals.points[2][1]}} />
                </g>

                

                <g ng-repeat="(indic,values) in currentRoom.layoutObjs track by indic"
                       >
                    <g icon-manip iconpts="layoutObjs" currentRoom="currentRoom">
                    <image ng-attr-x="{{values[0]+currentInspection.currentFloor.rooms[$index].roomPoints[0][0]}}" 
                           ng-attr-y="{{values[1]+currentInspection.currentFloor.rooms[$index].roomPoints[0][1]}}" 
                           ng-attr-width="{{iconWidth}}" 
                           ng-attr-height="{{iconHeight}}"
                           hm-drag = "dragLayoutObjs($event,indic)"
                           hm-tap = "openNote()"
                           xlink:href="{{'img/'+values[2]+'.png'}}"></image>
                    </g>
               </g>
            </g>

		</g>
        </svg>
<!--        <div ng-include="'partials/floor.html'"></div>-->
        
    </div>

<!--Should we have a box that is populated when viewed, or make full boxes and make invisible? Will need to put in a modal-->
    <div id="noteBox" ng-show="showNote">
        <div id="noteTopBar">
            <img ng-src="{{noteIcon}}" /> 
            <img href="" style="display:none;position:absolute;width:60px;height:60px;float:right;" 
                 id="smallImage" 
                 src="" />
            <img id="cameraIcon" 
                 ng-click="takePicture()"
                ng-src="img/camera.png"/>
            <span id="noteClose"
                  ng-click="showNote = !showNote">X</span>
        </div>
        <textarea id="noteText"
                  ng-click="focus()"
                  ng-model="note">

        </textarea>
    </div>
            

  	   </div>
        
    </ion-side-menu>
        
<!--    <ion-side-menu id="leftSideMenu" width="80" side="left" expose-aside-when="large">-->
<!--
        <ion-header-bar class="bar bar-header bar-dark">
            <h1 class="title">
                <div id="menubg">  
		      <div id="wrap_menus">
                <div id="minilogo">
                    <div class="wrapanimate2">
                    <div class="cube2">
                        <div class="front2"><img class ="front_image2" src="img/logo_big.svg"></div>
   
                    </div>
                    </div>
                </div>
              </div>
            </div>
            </h1>
        </ion-header-bar>
        <ion-view name="sideLeft"></ion-view>-->
        
<!--        <div ng-include="'partials/left.html'"></div>-->
    

    

<!--        </ion-side-menu>-->

    <ion-side-menu-content ng-click="toggleLeftSideMenu()">
        <ion-view name="questions"></ion-view>
    </ion-side-menu-content>
		 

<!--
	<div id="side_tabs" ng-controller="tabCtrl">
		<span class="side_tabs" ng-repeat="tab in tabs"><a ui-sref="questions.tabs({tabId: tab.id})"><img ng-src="{{tab.imageUrl}}"></a></span>
	</div>	
-->

    


</ion-side-menus>
</ion-view>